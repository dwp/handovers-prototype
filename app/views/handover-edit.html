{% extends "layout.html" %}

{% block content %}

<main id="content" role="main">
    <div class="main-content">
        {% if editOrCreate === 'edit' %}
            <h1 class="heading-large">Edit handover for {{ claimant.firstName }} {{ claimant.lastName }}</h1>
            <form action="/handover/edit" method="POST" class="form">
        {% else %}
            <h1 class="heading-large">Create handover for {{ claimant.firstName }} {{ claimant.lastName }}</h1>
            <form action="/handover/create" method="POST" class="form">
        {% endif %}

            <div class="form-group">
                <div class="grid-row">
                    <div class="column-half">
                        <legend class="form-label-bold">National insurance number</legend>
                        <div>
                            <p>{{ claimant.nino }}</p>
                        </div>
                    </div>
                    <div class="column-quarter">
                        <legend class="form-label-bold">Select office</legend>
                        <select class="select form-control" name="office" id="office">
                            <option value="">Select</option>
                            {% for office in officesList %}
                                <option value="{{ office.id }}" {{ 'selected' if officeDetails.id === office.id else ''}}>{{ office.officeName }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="column-quarter">
                        <legend class="form-label-bold">Select office type</legend>
                            <select class="select form-control" name="office-type" id="office-type">
                                <option value="">Select</option>
                                {% for offType in officeTypes %}
                                    <option value="{{ offType.id }}" {{ 'selected' if officeDetails.officeTypeId === offType.id else ''}}>{{ offType.officeType }}</option>
                                {% endfor %}
                            </select>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-half">
                        <legend class="form-label-bold">Select a benefit</legend>
                        <select class="select form-control" name="benefit" id="benefit">
                            <option value="">Select</option>
                            {% for benefit in benList %}
                                <option value="{{ benefit.id }}" {{ 'selected' if  handover.benefitId === benefit.id else ''}}>{{ benefit.benefitName }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    {% if editOrCreate === 'create' %}
                        <div class="column-half">
                        </div>
                    {% else %}
                        <div class="column-half">
                            <legend class="form-label-bold">Date and time raised</legend>
                            <p>Date: {{ handover.dateAndTimeRaisedForDisplay.day }} {{ handover.dateAndTimeRaisedForDisplay.month }} {{ handover.dateAndTimeRaisedForDisplay.year }}
                                &nbsp;&nbsp;&nbsp;&nbsp;Time: {{ handover.dateAndTimeRaisedForDisplay.hours }}:{{ handover.dateAndTimeRaisedForDisplay.mins }}</p>
                        </div>
                    {% endif %}
                </div>
                <br>
                <div class="grid-row">
                    <div class="column-half">
                        <legend class="form-label-bold">Select a handover type</legend>
                        <select class="select form-control" name="handover-type" id="handover-type">
                            <option value="">Select</option>
                            {% for handoverType in handTypesList %}
                            <option value="{{ handoverType.id }}" {{ 'selected' if handover.typeId === handoverType.id else ''}}>{{ handoverType.handoverType }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    {% if editOrCreate === 'create' %}
                        <div class="column-half">
                        </div>
                    {% else %}
                    <div class="column-half">
                        <legend class="form-label-bold">Target callback time</legend>
                        {% if handover.priority === "Non-callback" %}
                            <p>No target date and time for this priority</p>
                        {% else %}
                        <p>Date: {{ handover.targetDateAndTimeForDisplay.day }} {{ handover.targetDateAndTimeForDisplay.month }} {{ handover.targetDateAndTimeForDisplay.year }}
                            &nbsp;&nbsp;&nbsp;&nbsp;Time: {{ handover.targetDateAndTimeForDisplay.hours }}:{{ handover.targetDateAndTimeForDisplay.mins }}</p>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                <br>
                <div class="grid-row">
                    <div class="column-half">
                        <legend class="form-label-bold">Select a handover reason</legend>
                        <select class="select form-control" name="handover-reason" id="handover-reason">
                            <option value="">Select</option>
                            {% for handoverReason in handReasonsList %}
                            <option value="{{ handoverReason.id }}" {{ 'selected' if  handover.reasonId === handoverReason.id else ''}}>{{ handoverReason.handoverReason }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="column-half">
                        <!--<legend class="form-label-bold">Attachments</legend>-->
                        <!--<input type="text" class="form-control" id="handover-attachment" name="handover-attachment" value="Add attachment">-->
                    </div>
                </div>
                <br>
                <div class="grid-row">
                    <div class="column-half">
                        <legend class="form-label-bold">Select a priority</legend>
                        <select class="select form-control" name="handover-priority" id="handover-priority">
                            <option value="">Select</option>
                            <option value="Standard callback" {{ 'selected' if  handover.priority === 'Standard callback' else ''}}>Standard callback</option>
                            <option value="Non-callback" {{ 'selected' if  handover.priority === 'Non-callback' else ''}}>Non-callback</option>
                            <option value="Escalation" {{ 'selected' if  handover.priority === 'Escalation' else ''}}>Escalation</option>
                            <option value="Priority duplicate" {{ 'selected' if  handover.priority === 'Priority duplicate' else ''}}>Priority duplicate</option>
                        </select>
                    </div>
                    <div class="column-half">
                        <legend class="form-label-bold">Notes</legend>
                        {% if editOrCreate === 'edit' %}
                            {% if handover.notes %}
                                {% for note in handover.notes %}
                                    <p>{{ note.noteContent }}</p>
                                    <p class="font-xsmall form-hint">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(added by {{ note.userWhoAddedNote }} on {{ note.dateNoteAdded }})</p>
                                    <br>
                                {% endfor %}
                            {% else %}
                                <p>There are no notes for this handover yet</p>
                            {% endif %}
                        {% endif %}
                        <input class="form-control" type="text" id="handover-note" name="handover-note">
                    </div>
                </div>
                <br>
            </div>
            <div class="form-group">
                <input type="submit" class="button" value="Submit">
            </div>
        </form>
    </div>
</main>

<script src="/public/javascripts/vendor/jquery-1.11.0.min.js"></script>

{% endblock %}}